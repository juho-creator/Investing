# 풋 콜 패리티
[![English](https://img.shields.io/badge/lang-English-blue.svg)](https://github.com/juho-creator/Investing/blob/main/EN/PutCallParity.md)
[![한국어](https://img.shields.io/badge/lang-한국어-red.svg)](https://github.com/juho-creator/Investing/blob/main/EN/PutCallParity.md)

</br>

> [!CAUTION]
> **만기일 이후에만 권리를 행사할 수 있는 유럽형 옵션에만 적용됩니다**

</br>

콜 옵션의 가격과 **같은 기초 자산, 행사가격, 만기일**을 가진 해당 풋 옵션은 평형 가격을 유지하게 된다. </br>
이러한 풋 옵션과 콜 옵션의 균형적인 관계를 풋 콜 패리티라고 한다.</br>
만약 시장 가격이 이 관계 벗어나면 시세차익을 통해 이익을 취할 수 있다.
</br></br>


- **행사가격** : 만기일 이후에 옵션을 매수 또는 매도할 수 있는 가격

 </br></br></br>
  
$$ C+PV(x)=P+S $$

- C = 유럽형 콜 옵션의 가격
- PV(x) = 행사가격(x)의 현재 가치, 만기일의 가치를 무위험 이율로 할인
- P = 유럽형 풋 옵션의 가격
- S = 기초 자산의 현물 가격 또는 현재 시장 가치
</br></br></br>

# 풋 콜 패리티 차익 거래
## 채권을 이용한 방법 

 옵션의 행사가가 채권의 액면가와 정확히 일치하고 만기일이 동일할때
- XYZ 주식의 가격(S) = $50
- 옵션의 행사가격(x) = $55
- x의 현재 가치(PV) = $54.46 (만기시 가격이 $55가 될 채권)
- XYZ 주식에 대한 6개월 유럽형 콜 옵션의 가격(C) = $3.00

</br>

1. 풋 콜 패리티가 유지될때 (P = $7.46)</br>
$3 + $54.46 = P + $50 </br>
$57.46 - $50 = P </br>
$7.46 = P </br>
</br>
</br>


2. 풋 콜 패리티가 존재하지 않을때 (P = $8)</br>
$3 + $54.46 ≠ $8 + $50 </br>
$57.46 ≠ $58 </br>
</br>
</br>

다음과 같은 시세차익을 통해 이득을 추구할 수 있다 
1. 풋 옵션을 $8에 매도하고 콜 옵션을 $3에 매수한다.  
2. 기초 주식을 $50에 공매도한다.
3. 그럼 $5($8 - $3)의 현금이 즉시 유입된다.
</br>

이를 통해 우린 만기일에 $0.54의 보장된 이익을 얻게 된다($58- $57.46).</br>
왜냐하면 공매도한 주식 포지션이 풋 옵션이나 콜 옵션의 행사를 상쇄하기 때문이다.

한국투자증권 API 모의투자 장내채권현재호가를 지원하지 않는다. </br>
실전투자 장내채권현재호가를 모의투자에 동일하게 제공함으로</br>
실전투자 API를 사용해서 채권 가격만 가져와도 될 것 같다.
</br></br></br></br>

## 선물을 이용한 방법
![image](https://github.com/user-attachments/assets/882a7b6e-6f45-42f1-9399-9aebe1842d53)
</br></br></br>

아래와 같이 선물을 이용한 시세차익 거래를 진행해볼 수 있다
1. 풋 콜 패리티가 존재하지 않는다는 점을 포착한다
2. 선물 매도, 풋 매도, 콜 매수 주문을 한다
3. 만기일까지 기다린다

- **내가격** :  옵션의 행사 가격이 기초 자산의 현재 가격보다 유리한 상태
    - 풋 옵션: 현재 가격 < 행사가격
    - 콜 옵션: 현재 가격 > 행사가격
</br></br></br>


옵션의 행사가격과 선물의 만기 가격을 동일한 만기일로 $105라고 가정하자
</br>

![image](https://github.com/user-attachments/assets/e63a7a87-57a9-4d7c-b651-852edf2fa3d3)

**시나리오 1**: 선물 가격 < $105  
- 105 풋 매도: 내가격 상태이며, 풋 보유자로부터 선물계약을 $105에 매수할 의무 발생  
- 선물 매도: $105에 매수 후 $100에 매도하여 $5 손실 발생  
- 105 콜 매수: 만기 시점에 가치가 없어 $2 프리미엄 손실  
결론: 풋 옵션의 이익이 콜 옵션과 선물의 손실을 초과하여 순이익 $1 발생
</br></br>

**시나리오 2**: 선물 가격 > $105  
- 105 콜 매수: 내가격 상태이며, 옵션을 행사하여 $105에 선물계약 매수  
- 105 풋 매도: 풋 옵션 만기 시점에 가치가 없어 손실 발생  
- 선물 매도: $105에 매수 후 $100에 매도하여 $5 손실 발생  
결론: 풋 옵션의 이익이 콜 옵션과 선물의 손실을 초과하여 순이익 $1 발생
</br></br>

**시나리오 3**: 선물 가격 = $105  
- 105 풋 매도: 만기 시점에 가치가 없어 손실 없음  
- 105 콜 매수: 만기 시점에 가치가 없어 $2 프리미엄 손실  
- 선물 매도: 선물가격과 같아서 손실 없음  
결론: 옵션 프리미엄에서 얻은 $6이 선물 만기 손실을 보충하여 순이익 $1 발생
</br></br>

### 시세차익 거래 알고리즘
1. 웹소켓으로 가격 데이터 수집
- **선물** :  현재가, 행사가
- **콜/풋 옵션** : 현재가, 행사가
</br> </br> 

2. 결재월을 기반으로 최종거래일 (만기일) 계산
</br></br> 

3. 행사가와 만기일이 모두 동일한지 확인
</br></br> 


4. 풋 콜 패리티 공식을 사용하여 차익 거래 기회 결정
</br></br> 


5. 차익 거래 기회가 발견되면 거래 실행
</br></br> 


# 어떻게 가격 데이터를 수집해야될까? 
| API | 웹 소켓 | 
| -------- | -------- |
| 방대한 기초자산에 대하여 시세차익을 살펴볼 수 있음 | 한 기초자산에 대하여 시세차익 기회를 집중적으로 볼 수 있음 |

</br></br>

## 참고 자료
- [풋 콜 패리티란?](https://www.investopedia.com/terms/p/putcallparity.asp)
- [선물을 이용한 풋 콜 패리티 차익 거래](https://www.cmegroup.com/education/courses/introduction-to-options/put-call-parity.html)
- [CFA 레벨 (풋 콜 패리티)](https://www.youtube.com/watch?v=SbkvkU7-dEA&ab_channel=PrepNuggets)
