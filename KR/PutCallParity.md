# 풋 콜 패리티
[![English](https://img.shields.io/badge/lang-English-blue.svg)](https://github.com/juho-creator/Investing/blob/main/EN/PutCallParity.md)
[![한국어](https://img.shields.io/badge/lang-한국어-red.svg)](https://github.com/juho-creator/Investing/blob/main/EN/PutCallParity.md)

</br>

> [!CAUTION]
> **만기일 이후에만 권리를 행사할 수 있는 유럽형 옵션에만 적용됩니다**

</br>

콜 옵션의 가격은 **같은 기초 자산, 행사가격, 만기일**을 가진 해당 풋 옵션의 특정 공정 가격을 암시하며, 그 반대도 마찬가지입니다. 시장 가격이 이 관계에서 벗어나면 이는 숙련된 트레이더가 이익을 위해 활용할 수 있는 오가격을 나타냅니다.
</br>
- **행사가격** : 만기일 이후에 옵션을 매수 또는 매도할 수 있는 가격

 </br></br></br>
  
$$ C+PV(x)=P+S $$

- C = 유럽형 콜 옵션의 가격
- PV(x) = 행사가격(x)의 현재 가치, 만기일의 가치를 무위험 이율로 할인
- P = 유럽형 풋 옵션의 가격
- S = 기초 자산의 현물 가격 또는 현재 시장 가치
</br></br></br>

# 풋 콜 패리티 차익 거래
## 채권을 이용한 방법 (모의 계좌에서 실행 불가)
- XYZ 주식의 가격(S) = $50
- 옵션의 행사가격(x) = $55
- x의 현재 가치(PV) = $54.46
- XYZ 주식에 대한 6개월 유럽형 콜 옵션의 가격(C) = $3.00

</br></br>
$3 + $54.46 = P + $50 </br>
$57.46 - $50 = P </br>
$7.46 = P </br>
</br>
</br>

콜 < 풋 </br>

$3 + $54.46 ≠ $8 + $50 </br>

$57.46 ≠ $58 </br>
</br>
</br>

풋 > 콜 </br>

1. 풋 옵션을 $8에 매도하고 콜 옵션을 $3에 매수합니다.  
2. 기초 주식을 $50에 공매도합니다.
3. 즉시 현금 유입은 $5 ($8 - $3)입니다.
</br>

만기일에 차익 거래자는 $0.54의 보장된 이익을 얻게 됩니다($57.46 - $57).
왜냐하면 공매도한 주식 포지션이 풋 옵션이나 콜 옵션의 행사를 상쇄하기 때문입니다.
</br></br></br></br>

## 선물을 이용한 방법
![image](https://github.com/user-attachments/assets/882a7b6e-6f45-42f1-9399-9aebe1842d53)

- **내가격** :  옵션의 행사 가격이 기초 자산의 현재 가격보다 유리한 상태
    - 풋 옵션: 현재 가격 < 행사가격
    - 콜 옵션: 현재 가격 > 행사가격
</br></br></br>


옵션의 행사가격과 선물의 만기 가격을 동일한 만기일로 $105라고 가정하자
</br>


**시나리오 1** : 선물 가격 < $105 </br>
선물 가격이 행사가격보다 낮으면,
- 105 풋 매도 : 내가격 상태이며 행사가 될 것, 즉 풋 보유자로부터 선물계약을 $105에 매수할 의무가 있음
- 선물 매도 : $105매수한 후 $100로 매도했음으로 손실 발생
- 105 콜 매수 : 만기 시점에 가치가 사라졌음으로 $2 옵션 프리미엄은 손실 발생

결론적으로 풋 옵션의 이익이 콜 옵션과 선물의 손실을 초과하여 순이익이 발생한다
   
</br></br>

**시나리오 2** : 선물 가격 > $105 </br>
선물 가격이 행사가격보다 높으면,
- 105 콜 매수 : 내가격 상태이며 행사가 될 것, 
- 105 풋 매도 : 손실
- 선물 매도 : (만기)

풋 옵션의 이익이 콜 옵션과 선물의 손실을 초과하여 순이익이 발생합니다.
   
</br></br>

**시나리오 3** : 선물 가격 = $105 </br>
선물 가격이 행사가격과 같으면, 옵션 프리미엄에서 얻은 $6이 선물 만기 손실을 보충합니다.
- 105 풋 매도 (이익)
- 105 콜 매수 (손실)
- 선물 매도 (만기)

</br></br>

### 코드 흐름
1. 가격 데이터 획득
- **선물** : 거래 가격, 만기일, 최종 결제 가격
- **콜/풋 옵션** : 거래 가격, 만기일, 행사가격
</br></br>

2. 만기일과 만기 시 가격이 동일한지 확인
</br></br>

4. 풋 콜 패리티 공식을 사용하여 차익 거래 기회 결정
   
6. 차익 거래 기회가 발견되면 거래 실행
</br></br>

# 모든 자산의 만기일과 행사가격을 어떻게 알 수 있나요?
- 사전에 csv에 목록을 저장?

| API | 웹 소켓 | 
| -------- | -------- |
| 차익 거래를 위한 방대한 자산을 스캔할 수 있음 | 차익 거래를 위한 하나의 자산에 집중할 수 있음 |

</br></br>

## 참고 자료
- [선물을 이용한 풋 콜 패리티 차익 거래](https://www.cmegroup.com/education/courses/introduction-to-options/put-call-parity.html)
- [CFA 레벨 (풋 콜 패리티)](https://www.youtube.com/watch?v=SbkvkU7-dEA&ab_channel=PrepNuggets)
